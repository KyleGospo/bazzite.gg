/**
 * Before After
 * TwentyTwenty
 * http://zurb.com/playground/twentytwenty
 */
!function(_){_.fn.twentytwenty=function(h){h=_.extend({default_offset_pct:.5,orientation:"horizontal",before_label:"Before",after_label:"After",no_overlay:!1,move_slider_on_hover:!1,move_with_handle_only:!0,click_to_move:!1},h);return this.each(function(){var e=h.default_offset_pct,a=_(this),i=h.orientation,t="vertical"===i?"down":"left",n="vertical"===i?"up":"right";a.data("before")&&(h.before_label=a.data("before")),a.data("after")&&(h.after_label=a.data("after")),a.wrap("<div class='twentytwenty-wrapper twentytwenty-"+i+"'></div>"),h.no_overlay||(a.append("<div class='twentytwenty-overlay'></div>"),(y=a.find(".twentytwenty-overlay")).append("<div class='twentytwenty-before-label' data-content='"+h.before_label+"'></div>"),y.append("<div class='twentytwenty-after-label' data-content='"+h.after_label+"'></div>"));var o=a.find("img:first"),s=a.find("img:last");a.append("<div class='twentytwenty-handle'></div>");var r=a.find(".twentytwenty-handle");r.append("<span class='twentytwenty-"+t+"-arrow'></span>"),r.append("<span class='twentytwenty-"+n+"-arrow'></span>"),a.addClass("twentytwenty-container"),o.addClass("twentytwenty-before"),s.addClass("twentytwenty-after");function d(t){var e,n,t=(e=t,n=o.width(),t=o.height(),{w:n+"px",h:t+"px",cw:e*n+"px",ch:e*t+"px"});r.css("vertical"===i?"top":"left","vertical"===i?t.ch:t.cw),t=t,"vertical"===i?(o.css("clip","rect(0,"+t.w+","+t.ch+",0)"),s.css("clip","rect("+t.ch+","+t.w+","+t.h+",0)")):(o.css("clip","rect(0,"+t.cw+","+t.h+",0)"),s.css("clip","rect(0,"+t.w+","+t.h+","+t.cw+")")),a.css("height",t.h)}function l(t,e){var n;return n="vertical"===i?(e-w)/p:(t-f)/v,e=0,t=1,Math.max(e,Math.min(t,n))}_(window).on("resize.twentytwenty",function(t){d(e)});function c(t){((t.distX>t.distY&&t.distX<-t.distY||t.distX<t.distY&&t.distX>-t.distY)&&"vertical"!==i||(t.distX<t.distY&&t.distX<-t.distY||t.distX>t.distY&&t.distX>-t.distY)&&"vertical"===i)&&t.preventDefault(),a.addClass("active"),f=a.offset().left,w=a.offset().top,v=o.width(),p=o.height()}var f=0,w=0,v=0,p=0,y=function(t){a.hasClass("active")&&(e=l(t.pageX,t.pageY),d(e))},t=function(){a.removeClass("active")},n=h.move_with_handle_only?r:a;n.on("movestart",c),n.on("move",y),n.on("moveend",t),h.move_slider_on_hover&&(a.on("mouseenter",c),a.on("mousemove",y),a.on("mouseleave",t)),r.on("touchmove",function(t){t.preventDefault()}),a.find("img").on("mousedown",function(t){t.preventDefault()}),h.click_to_move&&a.on("click",function(t){f=a.offset().left,w=a.offset().top,v=o.width(),p=o.height(),e=l(t.pageX,t.pageY),d(e)}),_(window).trigger("resize.twentytwenty")})}}(jQuery);